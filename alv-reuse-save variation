Merhaba  ,benim sorum şu;Reuse alv gridde de save özelliğini açıp birden çok variation tanımlayıp,bu variasyonların defaultunu parametrede yakalayıp,
                                diğer variasyonları search help de göstererek kullanıcının birisini seçmesini sağlamak.Uygulayan birisinde izledim,birebir yaptım ama
                                bende ne defaultu yakaladı ne de diğer variasyonları yakalayıp search helpe koydu.Bu benim kod ile mi yoksa kullandığımız gui'nin sürümü
                                ile ilgili bir durumdur sence?
                                
  !!!!!Yeni Programa alıp variationları yeniden kaydedince bu sefer program çalıştı problem kalmadı.!!!!!
                                
--------------    Bu kısmı öncesine bakman için bilgi amaçlı gönderiyorum   ----------------                         
*Save;
*1-Tabloda yaptığımız Sort ,Exlud,fitre,kolon kaldırma gibi değişiklikleri kaydedebildiğimiz özellik.
*2-Reause alv  Grid  diplay fonksiyonunda i_save bölümü aktive edilir.Karşısına 'X';standart-'U';Kullanıcıya bağlı-'A';Her ikiside seçeneklerinden birisi
*yazılır.
*3-Save aktive edilip program  çalıştırılınca yukarda choose layout ve save layout isimli iki ikon geldi,save layottta istediğimi variationları yapıp
*save edebiliriz choose  layoutta bu variosyanlardan istediğimizi seçebiliriz.Default Setting;hangisi tabloyu açtığımızda karşımıza gelmesini istiyorsak
*seçeriz
*4-İ_save ipral etsen bile hafızasındaki variation2lar kalıyot o nedenle defaulta değşmeden çnceki ilk halini yapmak yada bir variationa ilk halini kaydetmek
*mantıklı olabilir.

*variant;
*1-oluşturduğumuz variantlardan dafault  özelliğini kazandırmayı programdan is_variant aktive edip karşısına yazarakta yapabiliyoruz. Bu gereksiz gibi görünse-
*de bir sonraki adımda Search Helpte yakalamamız için ihtiyaç olacak.
*2-İs_varİant için data tanımlayıp karşısına yazınca ve Reause alv  Grid fomksiyonu üzerine   gs_variant-variant = '/KAZIM2'. yazıp karşısına istediğimiz
*variaıntı yazarsak o variant artık defaul olur,önce yaptığımız default seçimini burda ezeriz.
---------------  Bu kısmı öncesine bakman için bilgi amaçlı gönderiyorum   -------------------                           
                                
*Variant-Search Helpte getirmek
*1-Elimizdeki variyantları Search Helpte görünür hale getirip kullanıcının birisini seçmesini sağlayacağız.Handle etmemiz gereken iki konu var;
*ilki parametremize default tanımlı varsa bunu yakalayıp göstermesini sağlamak.İkincisi ise;Diğer kayıtlı variantları search help olarak getirmek.
*2-Önce parametre tanımlarız;PARAMETERS: p_vari TYPE disvariant-variant
*3-INITIALIZATION altına parametrede önce default variantı yakalaması için REUSE_ALV_VARIANT_DEFAULT_GET fonsiyonunu çağırırız cs_variant için data
*       tanımlarız. If yapısını doldururuz.
*4- INITIALIZATION başına raporumuzu gireriz;gs_variant_get-report = sy-repid.  Böylece ilk kısmı hallettik.
*5-Search Help için;AT SELECTION-SCREEN ON VALUE-REQUEST FOR p_vari.yazılıp altına REUSE_ALV_VARIANT_F4 fonksiyomu çağırılır ,gerekli yerler ve if doldurulur.
*  At selection altınada raporumuz yazılması unulmaz;gs_variant_get-report = sy-repid.
*6-Şimdi sıra bu yapıyı kendi displaydeki alv-grid fonksiyonumuza tanıtmak ve bağlamak. Bunun için is_variant karşısına tanımladığımız gs variantı
*fonksiyon başında p_vari ye atarız;  gs_variant-variant = p_vari.

REPORT zko_deneme_24.

TYPES: BEGIN OF gty_table,
         box TYPE c LENGTH 1.
         INCLUDE  STRUCTURE zko_reuse_merge_s.
       TYPES:END OF gty_table.

DATA: gt_list TYPE TABLE OF gty_table,
      gs_list TYPE gty_table.


DATA: gt_fieldcatalog TYPE slis_t_fieldcat_alv,
      gs_fieldcatalog TYPE slis_fieldcat_alv.

DATA: gs_layout TYPE slis_layout_alv.

DATA: gs_variant_get TYPE disvariant,
      gs_variant     TYPE disvariant,
      gv_exit        TYPE char1.

PARAMETERS:p_vari TYPE disvariant-variant.

INITIALIZATION.

  gs_variant_get-report = sy-repid.

  CALL FUNCTION 'REUSE_ALV_VARIANT_DEFAULT_GET'         "Default variantı yakalamak için
    CHANGING
      cs_variant    = gs_variant_get
    EXCEPTIONS
      wrong_input   = 1
      not_found     = 2
      program_error = 3
      OTHERS        = 4.
  IF sy-subrc = 0.
    p_vari = gs_variant_get-variant.
  ENDIF.

AT SELECTION-SCREEN ON VALUE-REQUEST FOR p_vari.   "parametreye search help özelliği kazandırır.
  gs_variant_get-report = sy-repid.

  CALL FUNCTION 'REUSE_ALV_VARIANT_F4'             "SEARCH help için
    EXPORTING
      is_variant    = gs_variant_get
*     I_TABNAME_HEADER          =
*     I_TABNAME_ITEM            =
*     IT_DEFAULT_FIELDCAT       =
*     I_SAVE        = ' '
*     I_DISPLAY_VIA_GRID        = ' '
    IMPORTING
      e_exit        = gv_exit
      es_variant    = gs_variant_get
    EXCEPTIONS
      not_found     = 1
      program_error = 2
      OTHERS        = 3.
  IF sy-subrc EQ 0.
    IF gv_exit IS INITIAL .
      p_vari = gs_variant_get-variant.
    ENDIF.
  ENDIF.

START-OF-SELECTION.

  SELECT    sflight~carrid        "Almak istediğimiz satırları yazıyoruz,structure ile aynı sırada yapmamız lazım
          sflight~fldate
          sflight~planetype
          sflight~price
          scarr~carrname
          scarr~url
          scarr~currcode

        FROM sflight INNER JOIN scarr     "tabloları birleştiriyoruz
        ON sflight~carrid EQ scarr~carrid  "ortak satırı veriyoruz,bu ortak olan satırları al diye
        INTO CORRESPONDING FIELDS OF TABLE gt_list.                "aldığın satırları dahili tabloma at

  CALL FUNCTION 'REUSE_ALV_FIELDCATALOG_MERGE'
    EXPORTING
      i_program_name         = sy-repid
*     i_internal_tabname     = 'gt_table '
      i_structure_name       = 'ZKO_REUSE_MERGE_S'
      i_inclname             = sy-repid
      i_bypassing_buffer     = 'X'
    CHANGING
      ct_fieldcat            = gt_fieldcatalog
    EXCEPTIONS
      inconsistent_interface = 1
      program_error          = 2
      OTHERS                 = 3.

  gs_layout-colwidth_optimize = 'X'.
  gs_layout-zebra = 'X'.
  gs_layout-box_fieldname = 'BOX'.

*  gs_variant-variant = '/KAZIM2'.
  gs_variant-variant = p_vari.

  CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
    EXPORTING
*     I_INTERFACE_CHECK  = ' '
*     I_BYPASSING_BUFFER = ' '
*     I_BUFFER_ACTIVE    = ' '
      i_callback_program = 'ZKO_DENEME_T'    "sy-repid' de yazılabilir.
*     i_callback_pf_status_set = 'PF_STATUS_SET'
*     i_callback_user_command = 'USER_COMMAND'
*     I_CALLBACK_TOP_OF_PAGE  = ' '
*     I_CALLBACK_HTML_TOP_OF_PAGE       = ' '
*     I_CALLBACK_HTML_END_OF_LIST       = ' '
*     I_STRUCTURE_NAME   =
*     I_BACKGROUND_ID    = ' '
*     I_GRID_TITLE       =
*     I_GRID_SETTINGS    =
      is_layout          = gs_layout
      it_fieldcat        = gt_fieldcatalog
*     it_excluding       =
*     IT_SPECIAL_GROUPS  =
*     it_sort            =
*     it_filter          =
*     IS_SEL_HIDE        =
*     i_default          = 'X'
      i_save             = 'X'
     is_variant         = gs_variant
*     IT_EVENTS          =
*     IT_EVENT_EXIT      =
*     IS_PRINT           =
*     IS_REPREP_ID       =
*     I_SCREEN_START_COLUMN   = 0
*     I_SCREEN_START_LINE     = 0
*     I_SCREEN_END_COLUMN     = 0
*     I_SCREEN_END_LINE  = 0
*     I_HTML_HEIGHT_TOP  = 0
*     I_HTML_HEIGHT_END  = 0
*     IT_ALV_GRAPHICS    =
*     IT_HYPERLINK       =
*     IT_ADD_FIELDCAT    =
*     IT_EXCEPT_QINFO    =
*     IR_SALV_FULLSCREEN_ADAPTER        =
* IMPORTING
*     E_EXIT_CAUSED_BY_CALLER =
*     ES_EXIT_CAUSED_BY_USER  =
    TABLES
      t_outtab           = gt_list
    EXCEPTIONS
      program_error      = 1
      OTHERS             = 2.
